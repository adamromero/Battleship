!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n=(e,t)=>{let r=0;return{name:e,size:t,numHits:r,hit:()=>{r++},isSunk:()=>r===t}},o=e=>{document.getElementById("message").innerHTML=`<div>${e}</div>`},a=()=>{let e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=new Map;const r={PATROL:1,DESTROYER:2,SUBMARINE:3,BATTLESHIP:4,CARRIER:5},a={EMPTY:0,MISS:6,HIT:7},i=(t,r,n,o,i)=>{let l=10*t+r,d=10*i+l-10,s=10;if(n&&(d=l+i-1,s=1,l%10+i>10))return!1;if(d>=100)return!1;for(let t=l;t<=d;t+=s)if(e[t]!==a.EMPTY)return!1;for(let t=l;t<=d;t+=s)e[t]===a.EMPTY&&(e[t]=o);return!0};return{init:()=>{t.set(r.PATROL,n("Patrol Boat",2)),t.set(r.DESTROYER,n("Destroyer",3)),t.set(r.SUBMARINE,n("Submarine",4)),t.set(r.BATTLESHIP,n("Battleship",4)),t.set(r.CARRIER,n("Carrier",5))},placeShip:i,receiveAttack:(n,i)=>e[10*n+i]===r.PATROL||e[10*n+i]===r.SUBMARINE||e[10*n+i]===r.DESTROYER||e[10*n+i]===r.BATTLESHIP||e[10*n+i]===r.CARRIER?(t.get(e[10*n+i]).hit(),o(t.get(e[10*n+i]).name+" hit!"),e[10*n+i]=a.HIT,!0):e[10*n+i]!==a.HIT&&e[10*n+i]!==a.MISS&&e[10*n+i]===a.EMPTY&&(e[10*n+i]=a.MISS,!0),getBoard:()=>e,ships:t,allShipsSunk:()=>{for(let t=0;t<10;t++)for(let n=0;n<10;n++)if(e[10*t+n]===r.PATROL||e[10*t+n]===r.SUBMARINE||e[10*t+n]===r.DESTROYER||e[10*t+n]===r.BATTLESHIP||e[10*t+n]===r.CARRIER)return!1;return!0},randomlyPlaceShips:()=>{let e=1;for(;e<=5;){let r=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),o=Math.floor(2*Math.random()),a=e,l=t.get(e).size;i(r,n,o,a,l)&&e++}},shipHasSunk:()=>{for(let e=1;e<=5;e++)if(void 0!==t.get(e)&&t.get(e).isSunk()){let r=t.get(e).name;t.delete(e),o(r+" has sunk")}}}},i=()=>{document.getElementById("computerboard"),document.getElementById("playerboard");return{getAIAttackPosition:e=>{let t,r;do{t=Math.floor(10*Math.random()),r=Math.floor(10*Math.random())}while(e[10*t+r]>5);return{x:t,y:r}}}};(()=>{const e=e=>{let t=e.getAttribute("data-index");return{x:parseInt(t/10),y:t%10}},t=e=>{for(let t=0;t<e.length;t++)if(!e[t].disabled)return!1;return!0};return{init:()=>{let r=a();r.init();let n=a();n.init(),n.randomlyPlaceShips();let l=(()=>{let e=document.getElementById("playerboard"),t=document.getElementById("computerboard");return{renderPlayerBoard:t=>{let r='<div class="board">';for(let e=0;e<10;e++){for(let n=0;n<10;n++){let o="";7===t[10*e+n]?o="hit":6===t[10*e+n]?o="miss":0!==t[10*e+n]&&(o="ship-block"),r+=`<div class="column ${o}" data-index="${10*e+n}"></div>`}r+="<div></div>"}r+="</div>",e.innerHTML=r},renderComputerBoard:e=>{let r='<div class="board">';for(let t=0;t<10;t++){for(let n=0;n<10;n++){let o="";7===e[10*t+n]?o="hit":6===e[10*t+n]&&(o="miss"),r+=`<div class="column ${o}" data-index="${10*t+n}"></div>`}r+="<div></div>"}r+="</div>",t.innerHTML=r}}})();l.renderPlayerBoard(r.getBoard()),l.renderComputerBoard(n.getBoard());i();let d,s,u=i();r.placeShip(),o("Select your ships above and click on the Player board to position");const c=document.querySelectorAll(".select-ship");for(let e=0;e<c.length;e++)c[e].addEventListener("click",function(){d=parseInt(this.getAttribute("data-ship")),s=parseInt(this.getAttribute("data-size")),c.forEach(e=>{e.classList.remove("selected")}),this.classList.add("selected")});document.getElementById("boardArena").addEventListener("click",function a(i){if(i.target.parentNode.parentNode.matches("#playerboard")&&(e=>{for(let t=0;t<e.length;t++)if(e[t].classList.contains("selected"))return!0;return!1})(c)){let n=e(i.target),o="horizontal"===document.querySelector("input[name=orientation]:checked").value,a=document.querySelector("[data-ship='"+d+"']");!a.disabled&&r.placeShip(n.x,n.y,o,d,s)&&(l.renderPlayerBoard(r.getBoard()),a.disabled=!0,a.classList.remove("selected")),t(c)&&(document.getElementById("horz").disabled=!0,document.getElementById("vert").disabled=!0)}else if(t(c)&&i.target.parentNode.parentNode.matches("#computerboard")){let t=e(i.target);if(n.receiveAttack(t.x,t.y)){n.shipHasSunk(),n.allShipsSunk()&&(o("You win!"),document.getElementById("boardArena").removeEventListener("click",a)),l.renderComputerBoard(n.getBoard());let e=u.getAIAttackPosition(r.getBoard());r.receiveAttack(e.x,e.y),r.allShipsSunk()&&(o("Computer wins!"),document.getElementById("boardArena").removeEventListener("click",a)),l.renderPlayerBoard(r.getBoard())}}})}}})().init()}]);